{"version":3,"file":"koatest.js","sourceRoot":"","sources":["koatest.ts"],"names":[],"mappings":"AAAA,MAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAA;AACxB,MAAM,GAAG,GAAG,OAAO,CAAC,KAAK,CAAC,CAAA;AAC1B,MAAM,GAAG,GAAG,IAAI,GAAG,EAAE,CAAA;AACrB,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;IACZ,IAAI,GAAG,CAAC,IAAI,KAAK,OAAO,EAAE;QACxB,GAAG,CAAC,IAAI,GAAG,UAAU,CAAA;KACtB;IACD,EAAE,CAAC,QAAQ,CAAC,UAAU,EAAE,UAAU,GAAG,EAAE,IAAI;QACzC,IAAI;YACF,IAAI,GAAG;gBAAE,MAAM,GAAG,CAAA;YAClB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAA;YACjB,GAAG,CAAC,IAAI,GAAG,WAAW,CAAA;SACvB;QAAC,OAAO,CAAC,EAAE;YACV,0BAA0B;YAC1B,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAA;SACf;gBAAS;YACR,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,CAAA;SAC5B;IACH,CAAC,CAAC,CAAA;AACJ,CAAC,CAAC,CAAA;AAEF,gBAAgB;AAChB,6CAA6C;AAC7C,qBAAqB;AACrB,KAAK;AAEL,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAA","sourcesContent":["const fs = require('fs')\r\nconst Koa = require('koa')\r\nconst app = new Koa()\r\napp.use(ctx => {\r\n  if (ctx.path === '/good') {\r\n    ctx.body = 'good job'\r\n  }\r\n  fs.readFile('some.txt', function (err, data) {\r\n    try {\r\n      if (err) throw err\r\n      console.log(data)\r\n      ctx.body = 'hello koa'\r\n    } catch (e) {\r\n      // 这里捕获不到readcallback抛出的异常\r\n      console.log(e)\r\n    } finally {\r\n      console.log('离开 try catch')\r\n    }\r\n  })\r\n})\r\n\r\n// 捕获错误 不会造成接口崩溃\r\n// process.on('uncaughtException', (err) => {\r\n//   console.log(err)\r\n// })\r\n\r\napp.listen(3000)"]}